(function(o){var t={};function e(a){if(t[a]){return t[a].exports}var _=t[a]={i:a,l:false,exports:{}};o[a].call(_.exports,_,_.exports,e);_.l=true;return _.exports}e.m=o;e.c=t;e.d=function(o,t,a){if(!e.o(o,t)){Object.defineProperty(o,t,{enumerable:true,get:a})}};e.r=function(o){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(o,"__esModule",{value:true})};e.t=function(o,t){if(t&1)o=e(o);if(t&8)return o;if(t&4&&typeof o==="object"&&o&&o.__esModule)return o;var a=Object.create(null);e.r(a);Object.defineProperty(a,"default",{enumerable:true,value:o});if(t&2&&typeof o!="string")for(var _ in o)e.d(a,_,function(t){return o[t]}.bind(null,_));return a};e.n=function(o){var t=o&&o.__esModule?function t(){return o["default"]}:function t(){return o};e.d(t,"a",t);return t};e.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)};e.p="";return e(e.s=0)})([function(o,t,e){o.exports=e(1)},function(module,exports,__webpack_require__){"use strict";if(typeof _pi_adbot_bootstrap==="undefined"||true){(function(){var ___pi_brain_base_url="https://brain.adbot.tw";var ___pi_learning_base_url="https://learning.adbot.tw";var ___pi_gene_base_url="https://gene.breaktime.com.tw";var _pi_adbot_bootstrap={config:{keywords:[],gene_keywords:[],jquery_url:___pi_brain_base_url+"/js/jquery.min.js",jscookie_url:___pi_brain_base_url+"/js/js.cookie.min.js",jsmd5_url:___pi_brain_base_url+"/js/md5.min.js",linejs_url:"https://d.line-scdn.net/r/web/social-plugin/js/thirdparty/loader.min.js",breaktimejs_url:"https://a.breaktime.com.tw/js/au.js",breaktimejs_gene_url:___pi_gene_base_url+"/v1/adskeyword?url="+encodeURIComponent(window.location.href)+"&callback=_pi_adbot_bootstrap.init_gene_keywords",keywords_url:___pi_brain_base_url+"/ypakeywords.js",ip2location_url:___pi_brain_base_url+"/ypalocation.js",yonglin_app_url:___pi_brain_base_url+"/yonglin/app.js",pikwtest_url:___pi_learning_base_url+"/pi_keyword_testing.js",adbotkwtest_url:___pi_learning_base_url+"/adbot_keyword_testing.js",blockad_url:___pi_brain_base_url+"/js/blockad.min.js",bgif_url:___pi_learning_base_url+"/b.gif",ynapgif_url:___pi_learning_base_url+"/ynap.gif",ynapgif_delay_sec:5,css:{bottomfloat_1:___pi_brain_base_url+"/css/pi-AD-InBottom-customerColor.min.css",bottomfloat:___pi_brain_base_url+"/css/pi-AD-InBottom.min.css",kwads:___pi_brain_base_url+"/css/pi-AD-InBottom-kwads.min.css",bottom:___pi_brain_base_url+"/css/pi-AD-wzNav.min.css",slide:___pi_brain_base_url+"/css/pi-mobile-Ad.min.css",desktop:___pi_brain_base_url+"/css/ppiiad-DTgeneral.min.css",native_m:___pi_brain_base_url+"/css/pi-MB-YAD-iframe.min.css",native_d:___pi_brain_base_url+"/css/pi-DT-YAD-iframe.min.css",line_btn:___pi_brain_base_url+"/css/lineAD.min.css"},js:{jsfunc_url:___pi_brain_base_url+"/js/func.min.js",jsdata_url:___pi_brain_base_url+"/js/data.min.js",jslineids_url:___pi_brain_base_url+"/js/lineads.min.js"},icon_url:"https://fonts.googleapis.com/icon?family=Material+Icons",analytics_url:"https://www.google-analytics.com/analytics.js",agent_url:___pi_learning_base_url+"/js/agent.min.js",pixcates_url:___pi_brain_base_url+"/js/pixcates.min.js",default_partner_config_url:___pi_brain_base_url+"/js/cfg/477b327bba97571ba8005c72c22a0b8f.min.js",load_js_defaults:{dataType:"script",scriptCharset:"UTF-8",timeout:3e3},_ad_is_live:false,_ad_is_shown:false,trigger_sponsored_text:"搜尋",ip2location_enabled:true,force_use_y_pa:false,force_use_y_list:false,use_click_macro:false,ga_sample_rate:10,pv_sample_rate:50,organism_keyword_shown:false,organism_keyword_probability:50,footprint_keyword_shown:false,footprint_keyword_probability:50,gene_keyword_shown:false,gene_keyword_probability:100,_pv_ad_counter:999,passback_percent:25,noad_passback:false},configure:function(){_pi_adbot_bootstrap.debugMode()&&console.debug("configuring...");if(window.jQueryPi.isArray(_pi_adbot_bootstrap.config.gene_keywords)&&_pi_adbot_bootstrap.config.gene_keywords.length>0){_pi_adbot_bootstrap.config.gene_keyword_shown=true;_pi_adbot_bootstrap.config.keywords=_pi_adbot_bootstrap.config.gene_keywords;_pi_adbot_bootstrap.config.force_use_y_pa=true}else if(typeof _adbot_keywords!=="undefined"&&window.jQueryPi.isArray(_adbot_keywords)&&_adbot_keywords.length>0){_pi_adbot_bootstrap.config.keywords=_adbot_keywords}else if(typeof __lat_fp_kws!=="undefined"&&window.jQueryPi.isArray(__lat_fp_kws)&&__lat_fp_kws.length>0&&_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.footprint_keyword_probability){_pi_adbot_bootstrap.config.footprint_keyword_shown=true;_pi_adbot_bootstrap.config.keywords=__lat_fp_kws;_pi_adbot_bootstrap.config.force_use_y_pa=true}else if(typeof _adbot_organism_keywords!=="undefined"&&window.jQueryPi.isArray(_adbot_organism_keywords)&&_adbot_organism_keywords.length>0&&_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.organism_keyword_probability){_pi_adbot_bootstrap.config.organism_keyword_shown=true;_pi_adbot_bootstrap.shuffle(_adbot_organism_keywords);_pi_adbot_bootstrap.config.keywords=_adbot_organism_keywords}_pi_adbot_bootstrap.config.keywords=_pi_adbot_bootstrap.config.keywords.concat(_adbot_backup_keywords);if(_pi_adbot_bootstrap.isMobile()){if(typeof _adbot_partner_config.f2u!=="undefined"&&_adbot_partner_config.f2u&&!_pi_adbot_bootstrap.config.footprint_keyword_shown){_pi_adbot_bootstrap.debugMode()&&console.debug("f2u");_adbot_slots=["native"]}if(typeof _adbot_slots!=="undefined"&&window.jQueryPi.isArray(_adbot_slots)){_adbot_slots.forEach(function(o){switch(o){case"slide":_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css["+o+"]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.slide);break;case"bottom":_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css["+o+"]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.bottom);break;case"bottomfloat_fallback":_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css["+o+"]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.bottomfloat);break;case"bottomfloat":_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css["+o+"]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.bottomfloat);_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.kwads);break;case"bottomfloat_1":_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css["+o+"]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.bottomfloat_1);break;case"kwads":_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css["+o+"]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.kwads);break;case"native":_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css["+o+"]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.native_m);break;case"linebtn":_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css["+o+"]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.line_btn);break;default:_pi_adbot_bootstrap.debugMode()&&console.debug("no slot matched["+o+"]");break}})}}else{if(typeof _adbot_partner_config.f2u!=="undefined"&&_adbot_partner_config.f2u&&!_pi_adbot_bootstrap.config.footprint_keyword_shown){_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css[desktop native]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.native_d)}else{_pi_adbot_bootstrap.debugMode()&&console.debug("load slot css[desktop]");_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.desktop)}}if(typeof _adbot_color!=="undefined"&&typeof _adbot_color==="string"&&/#[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F]/.test(_adbot_color)){var o=".pi-ad-customize-color { color: "+_adbot_color+"!important }"+".pi-ad-customize-bg { background-color: "+_adbot_color+"!important }"+".pi-ad-customize-rbga-bg { background: rgba("+_pi_adbot_bootstrap.hexToRgb(_adbot_color).r+","+_pi_adbot_bootstrap.hexToRgb(_adbot_color).g+","+_pi_adbot_bootstrap.hexToRgb(_adbot_color).b+",0.8)!important  };";var t=document.body||document.getElementsByTagName("body")[0],e=document.createElement("style");e.type="text/css";if(e.styleSheet){e.styleSheet.cssText=o}else{e.appendChild(document.createTextNode(o))}t.appendChild(e)}if(typeof _adbot_ext_propeller!=="undefined"){_pi_adbot_bootstrap.debugMode()&&console.debug("_adbot_ext_propeller");_pi_adbot_bootstrap.debugMode()&&console.debug(_adbot_ext_propeller);for(var a in _adbot_ext_propeller){if(_adbot_ext_propeller.hasOwnProperty(a)){_adbot_partner_config.propeller[a]=_adbot_ext_propeller[a]}}}if(typeof _adbot_ip2location!=="undefined"){_pi_adbot_bootstrap.debugMode()&&console.debug("ip2location ip["+_adbot_ip2location.ip.toString()+"]");_pi_adbot_bootstrap.debugMode()&&console.debug("ip2location country["+_adbot_ip2location.country.toString()+"]");_pi_adbot_bootstrap.debugMode()&&console.debug("ip2location city["+_adbot_ip2location.city.toString()+"]");switch(_adbot_ip2location.country){case"tw":var _=["taipei","banqiao"];if(_.indexOf(_adbot_ip2location.city)!=-1){if(!this.isWeekendNight()&&!this.isNight()){_adbot_partner_config.propeller.enabled=false;_pi_adbot_bootstrap.config.force_use_y_list=true;_adbot_slots=["bottomfloat_fallback"];_pi_adbot_bootstrap.loadCss(_pi_adbot_bootstrap.config.css.bottomfloat);_pi_adbot_bootstrap.debugMode()&&console.debug("Force use Yaooo list ad")}}break;default:break}}if(typeof _adbot_partner_config.force_use_y_list!=="undefined"&&_adbot_partner_config.force_use_y_list){_pi_adbot_bootstrap.debugMode()&&console.debug("force_use_y_list");_pi_adbot_bootstrap.config.force_use_y_list=_adbot_partner_config.force_use_y_list}if(typeof _adbot_partner_config.use_click_macro!=="undefined"&&_adbot_partner_config.use_click_macro){_pi_adbot_bootstrap.debugMode()&&console.debug("use_click_macro");_pi_adbot_bootstrap.config.use_click_macro=_adbot_partner_config.use_click_macro}if(_pi_adbot_bootstrap.isZeroImprove()){_pi_adbot_bootstrap.debugMode()&&console.debug("zero improve");_pi_adbot_bootstrap.config.force_use_y_list=true}_pi_adbot_bootstrap.debugMode()&&console.debug("configured")},init:function(){_pi_adbot_bootstrap.debugMode()&&_pi_adbot_bootstrap.devMode()&&_pi_adbot_bootstrap.showLog("devMode");_pi_adbot_bootstrap.debugMode()&&console.debug(_pi_adbot_bootstrap.isMobile()?"Mobile":"Dekstop");if(typeof _adbot_partner_id!=="undefined"&&typeof _adbot_partner_id==="string"){var o=___pi_brain_base_url+"/js/cfg/"+_adbot_partner_id+".min.js";_pi_adbot_bootstrap.loadjQuery(function(){_pi_adbot_bootstrap.loadPartnerConfig(o,function(){_pi_adbot_bootstrap.loadSiteConfig(function(){if(_pi_adbot_bootstrap.config.ip2location_enabled){_pi_adbot_bootstrap.debugMode()&&console.debug("Js extend ip2loation");_pi_adbot_bootstrap.loadJsExtension(_pi_adbot_bootstrap.config.ip2location_url)}_pi_adbot_bootstrap.loadIcon();_pi_adbot_bootstrap.loadJs(function(){var o=___pi_learning_base_url+"/latfpkws.js?h="+pimd5(window.location.href).toString();_pi_adbot_bootstrap.loadLatFpKwsJs(o,function(){_pi_adbot_bootstrap.configure();_pi_adbot_bootstrap.pvTracking();var o=document.querySelector(".disable-adbot");if(o!=null){_pi_adbot_bootstrap.debugMode()&&_pi_adbot_bootstrap.showLog("Disable AD by HTML Element")}else if(typeof _adbot_partner_config.noad!=="undefined"&&_adbot_partner_config.noad){_pi_adbot_bootstrap.debugMode()&&_pi_adbot_bootstrap.showLog("Disable AD by Customer Config")}else if(typeof _adbot_partner_config.disable_desktop_ad!=="undefined"&&_adbot_partner_config.disable_desktop_ad&&!_pi_adbot_bootstrap.isMobile()){_pi_adbot_bootstrap.debugMode()&&_pi_adbot_bootstrap.showLog("Disable Desktop AD by Customer Config")}else if(typeof _adbot_partner_config.disable_mobile_ad!=="undefined"&&_adbot_partner_config.disable_mobile_ad&&_pi_adbot_bootstrap.isMobile()){_pi_adbot_bootstrap.debugMode()&&_pi_adbot_bootstrap.showLog("Disable Mobile AD by Customer Config")}else{if(typeof _adbot_partner_config.blockad!=="undefined"&&_adbot_partner_config.blockad){_pi_adbot_bootstrap.loadAsyncJs(_pi_adbot_bootstrap.config.blockad_url)}_pi_adbot_bootstrap.drawView();if(_adbot_partner_config.propeller.enabled){if(!_pi_adbot_bootstrap.is_ylm()){_pi_adbot_bootstrap.improveAD()}}if(typeof _adbot_partner_config.pvad!=="undefined"&&_adbot_partner_config.pvad.enabled){_pi_adbot_bootstrap.pv_ad_launcher()}if(typeof _adbot_passback_function!=="undefined"&&_adbot_passback_function.length>0){_pi_adbot_bootstrap.passback_launcher(_adbot_passback_function)}}_pi_adbot_bootstrap.loadAsyncJs(_pi_adbot_bootstrap.config.agent_url);if(!/zi\.media/.test(window.location.host)){_pi_adbot_bootstrap.loadAsyncJs(_pi_adbot_bootstrap.config.breaktimejs_url)}if(typeof _adbot_ip2location!=="undefined"&&typeof _adbot_ip2location.country!=="undefined"&&_adbot_ip2location.country=="tw"){}})})})})})}else{_pi_adbot_bootstrap.showLog("無法偵測到您的 ADBot Partner ID")}},drawView:function(){_pi_adbot_bootstrap.debugMode()&&console.debug("Draw view");if(_pi_adbot_bootstrap.isMobile()){if(window.jQueryPi.isArray(_adbot_slots)){_adbot_slots.sort().reverse();_adbot_slots.forEach(function(o){switch(o){case"linebtn":_pi_adbot_bootstrap.debugMode()&&console.debug("draw view["+o+"]");if(typeof _pi_adbot_lineads!=="undefined"&&window.jQueryPi.isArray(_pi_adbot_lineads)&&_pi_adbot_lineads.length>0){var t=_pi_adbot_lineads[Math.floor(Math.random()*_pi_adbot_lineads.length)];var e=t.line_id;var a=Math.floor(Math.random()*t.ad_texts.length);var _=t.ad_texts[a];var i=e+"-"+a+1;_pi_adbot_func.init_line_button(e,_,i)}break;case"bottomfloat_fallback":_pi_adbot_bootstrap.debugMode()&&console.debug("draw view["+o+"]");_pi_adbot_func.init_mobile_bottomfloat_trigger();break;case"bottomfloat":_pi_adbot_bootstrap.debugMode()&&console.debug("draw view["+o+"]");_pi_adbot_func.init_mobile_bottomfloat_mix_trigger();break;case"bottomfloat_1":_pi_adbot_bootstrap.debugMode()&&console.debug("draw view["+o+"]");_pi_adbot_func.init_mobile_bottomfloat_1_trigger();break;case"bottom":_pi_adbot_bootstrap.debugMode()&&console.debug("draw view["+o+"]");_pi_adbot_func.init_mobile_bottom_trigger();break;case"slide":_pi_adbot_bootstrap.debugMode()&&console.debug("draw view["+o+"]");_pi_adbot_func.init_mobile_slide_trigger();break;case"kwads":_pi_adbot_bootstrap.debugMode()&&console.debug("draw view["+o+"]");_pi_adbot_func.init_mobile_kwads_trigger();break;default:_pi_adbot_bootstrap.debugMode()&&console.debug("no slot matched["+o+"]");break}})}}else{if(typeof _adbot_partner_config.f2u!=="undefined"&&_adbot_partner_config.f2u&&!_pi_adbot_bootstrap.config.footprint_keyword_shown){_pi_adbot_func.init_desktop_native_ad();setTimeout(function(){_pi_adbot_bootstrap.ynap_gif(_adbot_partner_id)},_pi_adbot_bootstrap.config.ynapgif_delay_sec*1e3)}else{_pi_adbot_bootstrap.debugMode()&&console.debug("draw view[desktop]");_pi_adbot_func.init_desktop_trigger()}}if(typeof _adbot_partner_config.f2u!=="undefined"&&_adbot_partner_config.f2u&&!_pi_adbot_bootstrap.config.footprint_keyword_shown){_pi_adbot_bootstrap.debugMode()&&console.debug("do not bind trigger")}else{_pi_adbot_func.bind_trigger()}},loadCss:function(o){var t=document.createElement("link");t.setAttribute("rel","stylesheet");t.setAttribute("type","text/css");t.setAttribute("href",o);document.getElementsByTagName("head")[0].appendChild(t)},loadIcon:function(){var o=document.createElement("link");o.setAttribute("rel","stylesheet");o.setAttribute("type","text/css");o.setAttribute("href",this.config.icon_url);document.getElementsByTagName("head")[0].appendChild(o)},loadJs:function(o){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJs start");var t=[_pi_adbot_bootstrap.config.keywords_url,_pi_adbot_bootstrap.config.jscookie_url,_pi_adbot_bootstrap.config.jsmd5_url,_pi_adbot_bootstrap.config.js.jsdata_url,_pi_adbot_bootstrap.config.js.jsfunc_url,_pi_adbot_bootstrap.config.js.jslineids_url];if(_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.gene_keyword_probability){_pi_adbot_bootstrap.debugMode()&&console.debug("reach gene keywords probability, use gene keywords");t.push(_pi_adbot_bootstrap.config.breaktimejs_gene_url)}var e=window.jQueryPi.map(t,function(o){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJs "+o);var t=window.jQueryPi.extend({url:o},_pi_adbot_bootstrap.config.load_js_defaults);return window.jQueryPi.ajax(t)});window.jQueryPi.when.apply(window.jQueryPi,e).then(function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJs done");o()},function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJs failed");o()},function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJs progress")})},loadJsExtension:function(o){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJsExtension start "+o);var t=document.createElement("script");t.type="text/javascript";t.src=o;t.setAttribute("charset","utf-8");document.getElementsByTagName("head")[0].appendChild(t);if(t.readyState){t.onreadystatechange=function(){if(t.readyState=="loaded"||t.readyState=="complete"){t.onreadystatechange=null;_pi_adbot_bootstrap.debugMode()&&console.debug("loadJsExtension loaded "+o)}else{_pi_adbot_bootstrap.debugMode()&&console.debug("loadJsExtension error "+o)}}}else{t.onload=function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJsExtension loaded "+o)};t.onerror=function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadJsExtension error "+o)}}},loadFont:function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadFont start");if(typeof WebFont!=="undefined"){WebFont.load({google:{families:this.config.googlefontfamilies}});_pi_adbot_bootstrap.debugMode()&&console.debug("loadFont done")}},loadPartnerConfig:function(o,t){_pi_adbot_bootstrap.debugMode()&&console.debug("loadPartnerConfig start "+o);var e=document.createElement("script");e.type="text/javascript";e.src=o;e.setAttribute("charset","utf-8");document.getElementsByTagName("head")[0].appendChild(e);if(e.readyState){e.onreadystatechange=function(){if(e.readyState=="loaded"||e.readyState=="complete"){e.onreadystatechange=null;_pi_adbot_bootstrap.debugMode()&&console.debug("loadPartnerConfig loaded");_pi_adbot_bootstrap.checkPartnerConfigReady(function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadPartnerConfig done");t()})}else{_pi_adbot_bootstrap.debugMode()&&console.debug("loadPartnerConfig error, load default partner config");_pi_adbot_bootstrap.showLog("啊… 您的 ADBot Partner ID 或許有什麼誤會… ("+_adbot_partner_id+")");_pi_adbot_bootstrap.loadPartnerConfig(_pi_adbot_bootstrap.config.default_partner_config_url,t)}}}else{e.onload=function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadPartnerConfig loaded");_pi_adbot_bootstrap.checkPartnerConfigReady(function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadPartnerConfig done");t()})};e.onerror=function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadPartnerConfig error, load default partner config");_pi_adbot_bootstrap.showLog("啊… 您的 ADBot Partner ID 或許有什麼誤會… ("+_adbot_partner_id+")");_pi_adbot_bootstrap.loadPartnerConfig(_pi_adbot_bootstrap.config.default_partner_config_url,t)}}},checkPartnerConfigReady:function(o){if(typeof _adbot_partner_config!=="undefined"){o()}else{window.setTimeout(function(){_pi_adbot_bootstrap.checkPartnerConfigReady(o)},50)}},loadLatFpKwsJs:function(o,t){_pi_adbot_bootstrap.debugMode()&&console.debug("loadLatFpKwsJs start "+o);var e=document.createElement("script");e.type="text/javascript";e.src=o;e.setAttribute("charset","utf-8");document.getElementsByTagName("head")[0].appendChild(e);if(e.readyState){e.onreadystatechange=function(){if(e.readyState=="loaded"||e.readyState=="complete"){e.onreadystatechange=null;_pi_adbot_bootstrap.debugMode()&&console.debug("loadLatFpKwsJs loaded");_pi_adbot_bootstrap.checkLatFpKwsJsReady(function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadLatFpKwsJs done");t()})}else{_pi_adbot_bootstrap.debugMode()&&console.debug("loadLatFpKwsJs error, load default partner config");t()}}}else{e.onload=function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadLatFpKwsJs loaded");_pi_adbot_bootstrap.checkLatFpKwsJsReady(function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadLatFpKwsJs done");t()})};e.onerror=function(){_pi_adbot_bootstrap.debugMode()&&console.debug("loadLatFpKwsJs error, load default partner config");t()}}},checkLatFpKwsJsReady:function(o){if(typeof __lat_fp_kws!=="undefined"){o()}else{window.setTimeout(function(){_pi_adbot_bootstrap.checkLatFpKwsJsReady(o)},50)}},loadjQuery:function(o){if(!window.jQueryPi){_pi_adbot_bootstrap.debugMode()&&console.debug("no jQuery...");var t=document.createElement("script");t.type="text/javascript";t.src=this.config.jquery_url;t.setAttribute("charset","utf-8");document.getElementsByTagName("head")[0].appendChild(t);if(t.readyState){t.onreadystatechange=function(){if(t.readyState=="loaded"||t.readyState=="complete"){t.onreadystatechange=null;window.jQueryPi=window.jQuery.noConflict(true)}}}else{t.onload=function(){window.jQueryPi=window.jQuery.noConflict(true)}}}this.checkjQueryReady(function(){_pi_adbot_bootstrap.debugMode()&&console.debug("jQuery loaded");o()})},checkjQueryReady:function(o){if(window.jQueryPi){o()}else{window.setTimeout(function(){_pi_adbot_bootstrap.checkjQueryReady(o)},50)}},loadAsyncJs:function(o){_pi_adbot_bootstrap.debugMode()&&console.debug("load async js "+o);var t=document.createElement("script");t.type="text/javascript";t.src=o;t.setAttribute("charset","utf-8");document.getElementsByTagName("head")[0].appendChild(t)},pvTracking:function(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;if(typeof __gaTracker!=="undefined"){__gaTracker(function(){window.ga=__gaTracker})}ga("create",_adbot_partner_config.ga_resource,"auto",{name:"_pi_adbot"});if(_adbot_partner_config.ga_resource=="UA-89480192-1"){ga("_pi_adbot.send","pageview",{page:window.location.hostname+window.location.pathname})}else{if(typeof _adbot_partner_config.ga_sample_rate!=="undefined"){if(_pi_adbot_bootstrap.getRandomInt(1,100)<=_adbot_partner_config.ga_sample_rate){ga("_pi_adbot.send","pageview")}}else{ga("_pi_adbot.send","pageview")}if(_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.ga_sample_rate){ga("create","UA-89480192-1","auto",{name:"_pi_adbot_default"});if(_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.pv_sample_rate){ga("_pi_adbot_default.send","pageview",{page:window.location.hostname+window.location.pathname})}if(_pi_adbot_bootstrap.config.footprint_keyword_shown){if(_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.pv_sample_rate){ga("_pi_adbot_default.send","event","footprint_keyword_shown","shown","重定向關鍵字",1)}}if(_pi_adbot_bootstrap.config.organism_keyword_shown){if(_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.pv_sample_rate){ga("_pi_adbot_default.send","event","organism_keyword_shown","shown","重定向關鍵字",1)}}if(_pi_adbot_bootstrap.config.gene_keyword_shown){if(_pi_adbot_bootstrap.getRandomInt(1,100)<=_pi_adbot_bootstrap.config.pv_sample_rate){ga("_pi_adbot_default.send","event","gene_keyword_shown","shown","重定向關鍵字",1)}}}}if(typeof _adbot_partner_config.f2u!=="undefined"&&_adbot_partner_config.f2u&&_pi_adbot_bootstrap.isMobile()){ga("create","UA-97981201-1","auto",{name:"breaktime_line_it_btn"});ga("breaktime_line_it_btn.send","pageview",{page:window.location.hostname+window.location.pathname})}if(!(window.ga&&ga.create)){_pi_adbot_bootstrap.debugMode()&&console.debug("no ga load ga");window.jQueryPi.getScript(this.config.analytics_url,function(){})}_pi_adbot_bootstrap.debugMode()&&console.debug("ga pageview")},adTracking:function(o,t,e){if(typeof ga!=="undefined"){ga("_pi_adbot.send","event",o,t,e,1);if(_adbot_partner_config.ga_resource!="UA-89480192-1"){ga("_pi_adbot_default.send","event",o,t,e,1)}if(typeof _adbot_partner_config.f2u!=="undefined"&&_adbot_partner_config.f2u&&_pi_adbot_bootstrap.isMobile()){ga("breaktime_line_it_btn.send","event",o,t,e,1)}_pi_adbot_bootstrap.debugMode()&&console.debug("ga event ("+o+","+t+","+e+")")}else{_pi_adbot_bootstrap.debugMode()&&console.debug("No ga")}},debug:function(o){if(typeof localStorage!=="undefined"){o?localStorage.setItem("__pi_adbot_debug__",true):localStorage.removeItem("__pi_adbot_debug__")}else{alert("No localStorage supported")}},debugMode:function(){try{if(typeof localStorage!=="undefined"){return localStorage.getItem("__pi_adbot_debug__")!==null}}catch(o){return false}return false},dev:function(o){if(typeof localStorage!=="undefined"){o?localStorage.setItem("__pi_adbot_dev__",true):localStorage.removeItem("__pi_adbot_dev__")}else{alert("No localStorage supported")}},devMode:function(){try{if(typeof localStorage!=="undefined"){return localStorage.getItem("__pi_adbot_dev__")!==null}}catch(o){return false}return false},inIframe:function(){try{return window.self!==window.top}catch(o){return true}return false},hexToRgb:function(o){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;o=o.replace(t,function(o,t,e,a){return t+t+e+e+a+a});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},shuffle:function(o){var t,e,a;for(a=o.length;a;a--){t=Math.floor(Math.random()*a);e=o[a-1];o[a-1]=o[t];o[t]=e}},getRandomInt:function(o,t){return Math.floor(Math.random()*(t-o+1))+o},isMobile:function(){return/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)},isSiteRdr:function(){return document.referrer!==undefined&&typeof _adbot_partner_config.rdr!=="undefined"&&_adbot_partner_config.rdr.length>0&&new RegExp("^https?://w{0,3}.?([w.]+)?"+_adbot_partner_config.rdr,"i").test(document.referrer)},isFromSE:function(){return document.referrer!==undefined&&/^https?:\/\/w{0,3}\.?([\w.]+)?google|^https?:\/\/w{0,3}\.?([\w.]+)?yahoo|^https?:\/\/w{0,3}\.?([\w.]+)?baidu|^https?:\/\/w{0,3}\.?([\w.]+)?sogou|^https?:\/\/w{0,3}\.?([\w.]+)?yandex|^https?:\/\/w{0,3}\.?([\w.]+)?bing|^https?:\/\/w{0,3}\.?([\w.]+)?360|^https?:\/\/piliapp-mapping/i.test(document.referrer)},isFromFB:function(){return document.referrer!==undefined&&/^https?:\/\/w{0,3}\.?([\w.]+)?facebook/i.test(document.referrer)},isHotTime:function(){var o=(new Date).getHours();var t=1;if(_adbot_partner_config.propeller.enabled_hour_start>_adbot_partner_config.propeller.enabled_hour_end){return o>=_adbot_partner_config.propeller.enabled_hour_start-t&&o<24||o>=0&&o<_adbot_partner_config.propeller.enabled_hour_end+t}else{return o>=_adbot_partner_config.propeller.enabled_hour_start-t&&o<_adbot_partner_config.propeller.enabled_hour_end+t}},isNight:function(){var o=(new Date).getDay();var t=(new Date).getHours();if(o>0&&o<6&&(t>=21||t>=0&&t<7)){return true}return false},isWeekendNight:function(){var o=(new Date).getDay();var t=(new Date).getHours();if((o==0||o==6)&&(t>=21||t>=0&&t<7)){return true}return false},isWeekend:function(){var o=new Date;var t=o.getDay();return t==0||t==6},isZeroImprove:function(){if(this.isHotTime()){if(_pi_adbot_bootstrap.isMobile()){if(this.isFromSE()||this.isSiteRdr()){if(_adbot_partner_config.propeller.hottime_se_ratio>0)return false}if(this.isFromFB()){if(_adbot_partner_config.propeller.hottime_fb_ratio>0)return false}if(_adbot_partner_config.propeller.hottime_ratio>0)return false}else{if(this.isFromSE()||this.isSiteRdr()){if(_adbot_partner_config.propeller.d_hottime_se_ratio>0)return false}if(this.isFromFB()){if(_adbot_partner_config.propeller.d_hottime_fb_ratio>0)return false}if(_adbot_partner_config.propeller.d_hottime_ratio>0)return false}}else{if(_pi_adbot_bootstrap.isMobile()){if(this.isFromSE()||this.isSiteRdr()){if(_adbot_partner_config.propeller.normaltime_se_ratio>0)return false}if(this.isFromFB()){if(_adbot_partner_config.propeller.normaltime_fb_ratio>0)return false}if(_adbot_partner_config.propeller.normaltime_ratio>0)return false}else{if(this.isFromSE()||this.isSiteRdr()){if(_adbot_partner_config.propeller.d_normaltime_se_ratio>0)return false}if(this.isFromFB()){if(_adbot_partner_config.propeller.d_normaltime_fb_ratio>0)return false}if(_adbot_partner_config.propeller.d_normaltime_ratio>0)return false}}return true},getImproveThreshold:function(o,t,e){var a=o;if(this.isFromSE()||this.isSiteRdr()){_pi_adbot_bootstrap.debugMode()&&console.debug("From SE");a=t+15}if(this.isFromFB()){_pi_adbot_bootstrap.debugMode()&&console.debug("From FB");a=e+15}_pi_adbot_bootstrap.debugMode()&&console.debug("improve threshold "+a);return a},improveAD:function(){_pi_adbot_bootstrap.debugMode()&&console.debug("[improve AD] Hot time start hour: "+_adbot_partner_config.propeller.enabled_hour_start+", end hour: "+_adbot_partner_config.propeller.enabled_hour_end);if(this.isHotTime()){if(_pi_adbot_bootstrap.isMobile()){_pi_adbot_bootstrap.debugMode()&&console.debug("Mobile");var o=this.getImproveThreshold(_adbot_partner_config.propeller.hottime_ratio,_adbot_partner_config.propeller.hottime_se_ratio,_adbot_partner_config.propeller.hottime_fb_ratio)}else{_pi_adbot_bootstrap.debugMode()&&console.debug("Desktop");var o=this.getImproveThreshold(_adbot_partner_config.propeller.d_hottime_ratio,_adbot_partner_config.propeller.d_hottime_se_ratio,_adbot_partner_config.propeller.d_hottime_fb_ratio)}}else{if(_pi_adbot_bootstrap.isMobile()){_pi_adbot_bootstrap.debugMode()&&console.debug("Mobile");var o=this.getImproveThreshold(_adbot_partner_config.propeller.normaltime_ratio,_adbot_partner_config.propeller.normaltime_se_ratio,_adbot_partner_config.propeller.normaltime_fb_ratio)}else{_pi_adbot_bootstrap.debugMode()&&console.debug("Desktop");var o=this.getImproveThreshold(_adbot_partner_config.propeller.d_normaltime_ratio,_adbot_partner_config.propeller.d_normaltime_se_ratio,_adbot_partner_config.propeller.d_normaltime_fb_ratio)}}var t=this.getRandomInt(1,100);_pi_adbot_bootstrap.debugMode()&&console.debug("_rand_int="+t.toString());if(t<=o&&!_pi_adbot_bootstrap.isSetFacCookie()){_pi_adbot_bootstrap.debugMode()&&console.debug("AD improved");_pi_adbot_bootstrap.config.noad_passback=true;setTimeout(function(){if(window.jQueryPi("._pi_adbot_mobile_bottom_trigger>.__pi_adbot_trigger:first").length>0){window.jQueryPi("._pi_adbot_mobile_bottom_trigger>.__pi_adbot_trigger:first").click()}else{window.jQueryPi(".__pi_adbot_trigger:first").click()}_pi_adbot_bootstrap.adTracking("pi_adbot_improve_ad","autoOpen",_adbot_slots.join(","));setTimeout(function(){_pi_adbot_bootstrap.debugMode()&&console.debug("fuzzy auto click");_pi_adbot_bootstrap.setFacCookie()},100)},50)}else{_pi_adbot_bootstrap.debugMode()&&console.debug("out of improve threshold");_pi_adbot_bootstrap.config.force_use_y_list=true}},pv_ad_launcher:function(){_pi_adbot_bootstrap.debugMode()&&console.debug("pv_ad_launcher");var o=999;if(window.Cookies.get("pi_adbot_pv_ad_counter")===undefined){o=_pi_adbot_bootstrap.isMobile()?_pi_adbot_bootstrap.getRandomInt(_adbot_partner_config.pvad.mobile_improve_start,_adbot_partner_config.pvad.mobile_improve_end):_pi_adbot_bootstrap.getRandomInt(_adbot_partner_config.pvad.desktop_improve_start,_adbot_partner_config.pvad.desktop_improve_end)}else{o=parseInt(window.Cookies.get("pi_adbot_pv_ad_counter"))-1}_pi_adbot_bootstrap.config["_pv_ad_counter"]=o;window.Cookies.set("pi_adbot_pv_ad_counter",o,{expires:1});_pi_adbot_bootstrap.debugMode()&&console.debug("pi_adadbot_pv_ad_counter="+o);if(_pi_adbot_bootstrap.isPvAd()){if(!window.jQueryPi(".__pi_adbot_trigger:first").data("active")){_pi_adbot_bootstrap.debugMode()&&console.debug("pv ad fire");setTimeout(function(){window.jQueryPi(".__pi_adbot_trigger:first").click()},50);o=_pi_adbot_bootstrap.isMobile()?_pi_adbot_bootstrap.getRandomInt(_adbot_partner_config.pvad.mobile_improve_start,_adbot_partner_config.pvad.mobile_improve_end):_pi_adbot_bootstrap.getRandomInt(_adbot_partner_config.pvad.desktop_improve_start,_adbot_partner_config.pvad.desktop_improve_end);window.Cookies.set("pi_adbot_pv_ad_counter",o,{expires:1})}}},passback_launcher:function(passback_name){_pi_adbot_bootstrap.debugMode()&&console.debug("passback_launcher["+passback_name+"]");if(typeof eval(passback_name)==="function"){var passback_flag=false;var original_position=window.jQueryPi(window).scrollTop();var document_height=window.jQueryPi(document).height();var passback_trigger_percent=typeof _adbot_passback_percent!=="undefined"?parseInt(_adbot_passback_percent):_pi_adbot_bootstrap.config.passback_percent;window.jQueryPi(window).scroll(function(){var current_position=window.jQueryPi(window).scrollTop();var current_position_percent=current_position/document_height*100;if(!passback_flag&&!_pi_adbot_bootstrap.config["_ad_is_shown"]&&current_position_percent>passback_trigger_percent){_pi_adbot_bootstrap.debugMode()&&console.debug("passback_launcher["+passback_name+"] run as function");eval(passback_name+"()");passback_flag=true;window.jQueryPi(".__pi_adbot_trigger").remove()}})}else{_pi_adbot_bootstrap.debugMode()&&console.debug("passback_launcher["+passback_name+"] is not a function")}},isPvAd:function(){return _pi_adbot_bootstrap.config["_pv_ad_counter"]<=0},isSetFacCookie:function(){return window.Cookies!==undefined&&window.Cookies.get("pi_adbot_fac")!==undefined},setFacCookie:function(){return window.Cookies!==undefined&&window.Cookies.set("pi_adbot_fac",true,{expires:_adbot_partner_config.propeller.fac_expire})},loadSiteConfig:function(o){_pi_adbot_bootstrap.debugMode()&&console.debug("loadSiteConfig start");var t=["pixnet.net"];var e="";t.some(function(o){if(window.location.href.indexOf(o)!=-1){e=o;return true}return false});_pi_adbot_bootstrap.debugMode()&&console.debug("current site["+e+"]");var a=[];switch(e){case"pixnet.net":a.push(_pi_adbot_bootstrap.config.pixcates_url);break}if(a.length>0){var _=window.jQueryPi.map(a,function(o){var t=window.jQueryPi.extend({url:o},_pi_adbot_bootstrap.config.load_js_defaults);return window.jQueryPi.ajax(t)});window.jQueryPi.when.apply(window.jQueryPi,_).then(function(){switch(e){case"pixnet.net":_pi_adbot_bootstrap.config.keywords_url+="?cfg="+_pi_adbot_pix.get_keyword_cfg(_pi_adbot_pix.get_cate());break}_pi_adbot_bootstrap.debugMode()&&console.debug("loadSiteConfig done");o()})}else{_pi_adbot_bootstrap.debugMode()&&console.debug("loadSiteConfig done");o()}},showLog:function(o){window.console&&console.log("%c"+o," text-shadow: 0 1px 0 #ccc,0 2px 0 #c9c9c9,0 3px 0 #bbb,0 4px 0 #b9b9b9,0 5px 0 #aaa,0 6px 1px rgba(0,0,0,.1),0 0 5px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.3),0 3px 5px rgba(0,0,0,.2),0 5px 10px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.2),0 20px 20px rgba(0,0,0,.15);font-size:5em")},is_ylm:function(){return(_pi_adbot_bootstrap.config.force_use_y_list||!_pi_adbot_bootstrap.isHotTime()||!_pi_adbot_bootstrap.config.force_use_y_pa&&!(_pi_adbot_bootstrap.isFromSE()||_pi_adbot_bootstrap.isFromFB()||_pi_adbot_bootstrap.isSiteRdr())&&!_pi_adbot_bootstrap.isPvAd())&&!_pi_adbot_bootstrap.devMode()},getFormattedDate:function(o){var t=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");var e=t[o.getDay()];var a=o.getDate();var _=o.getMonth()+1;var i=o.getFullYear();var r=o.getHours();var n=o.getMinutes();var d=12;var s=Math.floor(r/d)*d;if(a<10){a="0"+a}if(_<10){_="0"+_}if(n<10){n="0"+n}if(s<10){s="0"+s}return i.toString()+_.toString()+a.toString()+s.toString()},ad:function(o,t,e,a){o=o.toString();if(typeof o!=="undefined"&&o.length>0){a=typeof a==="function"?a:function o(){};var _=_pi_adbot_bootstrap.getFormattedDate(new Date);var i=encodeURIComponent(o);var r=t;var n=e;var d="cell.adbot.tw";var s="https://"+d+"/ypa?tt="+i+"&partner="+_adbot_partner_id+"&callback="+n;if(typeof _adbot_label!=="undefined"&&typeof _adbot_label==="string"&&_adbot_label.length>0){s+="&label="+_adbot_label}window.jQueryPi.getScript(s,a)}},b_gif:function(o,t,e){_pi_adbot_bootstrap.debugMode()&&console.debug("create b gif");var a=_pi_adbot_bootstrap.config.bgif_url+"?"+"u="+encodeURIComponent(window.location.href)+"&k="+encodeURIComponent(o)+"&t="+encodeURIComponent(t)+"&d="+encodeURIComponent(e);_pi_adbot_bootstrap.debugMode()&&console.debug(a);window.jQueryPi("body").append(window.jQueryPi("<img/>").attr("style","display:none;").attr("class","bat_img").attr("src",a))},ynap_gif:function(o){_pi_adbot_bootstrap.debugMode()&&console.debug("create ynap gif");var t=_pi_adbot_bootstrap.config.ynapgif_url+"?"+"adbid="+o+"&fqdn="+encodeURIComponent(window.location.hostname)+"&href="+encodeURIComponent(window.location.href);_pi_adbot_bootstrap.debugMode()&&console.debug(t);window.jQueryPi("body").append(window.jQueryPi("<img/>").attr("style","display:none;").attr("class","ynap_img").attr("src",t))},parse_y_syndication_info:function(o){_pi_adbot_bootstrap.debugMode()&&console.debug("exec breaktime pbfp profile");window.pbfp.profile({userAge:o.userAge,userGender:o.userGender,userCountry:o.userCountry})},__pbfp_adsInfo:function(o){if(typeof window.pbfp==="object"&&typeof window.pbfp.adsInfo==="function"){if(typeof o.ads!=="undefined"&&typeof o.keyword!=="undefined"){_pi_adbot_bootstrap.debugMode()&&console.debug("exec breaktime pbfp adsInfo");window.pbfp.adsInfo({source:"ypa",config:"",type:"",keyword:o.keyword,ads:o.ads})}}else{_pi_adbot_bootstrap.debugMode()&&console.debug("wait breaktime pbfp adsInfo");setTimeout("_pi_adbot_bootstrap.__pbfp_adsInfo("+o+")",500)}},init_gene_keywords:function(o){if(o.status){if(o.data.length>0){o.data.forEach(function(o){_pi_adbot_bootstrap.config.gene_keywords.push(o.text)})}}},get_filtered_ad:function(o){var t=null;if(typeof _adbot_partner_config.ad_filter!=="undefined"){window.jQueryPi.each(o,function(){var o=this;var e=false;if(typeof _adbot_partner_config.ad_filter.sitehost!=="undefined"){window.jQueryPi.each(_adbot_partner_config.ad_filter.sitehost,function(){var t=this;var a=new RegExp(t,"i");var _=a.exec(o.sitehost);if(_!=null){e=true;return false}})}if(!e){t=o;return false}})}else{t=o[0]}return t},get_click_url:function(o){return o},stringBytes:function(o){var t=o.length,e;var a=0;for(var _=0;_<t;_++){e=o.charCodeAt(_);while(e>0){a++;e=e>>8}}return a},sortKeywordsByStringBytes:function(){var o=[];_pi_adbot_bootstrap.config.keywords.forEach(function(t){o.push([t,_pi_adbot_bootstrap.stringBytes(t)])});o.sort(function(o,t){return o[1]-t[1]});var t=[];o.forEach(function(o){t.push(o[0])});_pi_adbot_bootstrap.config.keywords=t}};window["_pi_adbot_bootstrap"]=_pi_adbot_bootstrap;_pi_adbot_bootstrap.init()})()}else{_pi_adbot_bootstrap.debugMode()&&console.debug("[IGNORE] initailized...")}}]);